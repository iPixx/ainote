<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Parser Tests</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-output {
            background: #f8f9fa;
            border-left: 4px solid #007acc;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        
        .preview {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            background: white;
        }
        
        .stats {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background: #005999;
        }
        
        .demo-input {
            width: 100%;
            height: 200px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        
        .error {
            color: #dc3545;
        }
        
        .success {
            color: #28a745;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>aiNote Markdown Parser Tests</h1>
        <p>Testing the custom markdown parser for Issue #46</p>
        
        <button onclick="runTests()">Run All Tests</button>
        <button onclick="loadTestMdFile()" style="margin-left: 10px;">Load Test.md File</button>
        <div id="testOutput" class="test-output"></div>
    </div>

    <div class="test-container">
        <h2>Interactive Demo</h2>
        <p>Type markdown in the textarea below to see real-time parsing:</p>
        
        <textarea id="markdownInput" class="demo-input" placeholder="Type markdown here..."># üöÄ Complete Markdown Syntax Demo

## Headings

# Heading 1
## Heading 2
### Heading 3
#### Heading 4
##### Heading 5
###### Heading 6

## Text Formatting

This paragraph has **bold text**, _italic text_, **_bold and italic_**, and ~~strikethrough~~.

You can also use **double underscore bold** and _single underscore italic_.

## Code Examples

Here's some `inline code` in a sentence.

```javascript
// Code block with syntax highlighting
function greetUser(name) {
    const message = `Hello, ${name}!`;
    console.log(message);
    return message;
}

greetUser('World');
```

```python
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

print([fibonacci(i) for i in range(10)])
```

## Links and References

Visit [Google](https://google.com) or check out [GitHub](https://github.com).

You can also use reference-style links like [this one][1].

[1]: https://example.com

## Lists

### Unordered Lists

- First item
- Second item
  - Nested item
  - Another nested item
    - Deep nesting
- Third item

### Ordered Lists

1. First ordered item
2. Second ordered item
   1. Nested ordered item
   2. Another nested ordered item
3. Third ordered item

## Blockquotes

> This is a simple blockquote.
> It can span multiple lines.

> > This is a nested blockquote.
> > It shows multiple levels of quoting.

> ### Blockquotes can contain other elements
>
> Including **formatted text** and `code`.

## Mixed Content

This paragraph demonstrates **bold _italic_** nesting, along with `inline code` and [links](https://example.com).

> **Quote with formatting**: This shows how _various_ **elements** can be `combined` in a [blockquote](https://example.com).

## Performance Test

This is a longer paragraph that tests the performance of the syntax highlighter with more content.

**Bold text performance test**: Bold content repeated multiple times.

_Italic text performance test_: Italic content repeated multiple times.

```
Code block performance test: Line of code that is repeated to test performance.
Code block performance test: Line of code that is repeated to test performance.
```

That's a comprehensive demonstration of all supported markdown syntax elements! üéâ</textarea>

        <div class="stats" id="parseStats"></div>
        
        <h3>Parsed HTML Output:</h3>
        <div class="test-output" id="htmlOutput"></div>
        
        <h3>Rendered Preview:</h3>
        <div class="preview" id="htmlPreview"></div>
    </div>

    <script type="module">
        import MarkdownParser from './markdown-parser.js';
        import { markdownParserTests } from './markdown-parser.test.js';
        
        const parser = new MarkdownParser();
        
        // Make parser available globally for testing
        window.parser = parser;
        window.markdownParserTests = markdownParserTests;
        
        // Run tests function
        window.runTests = async function() {
            const output = document.getElementById('testOutput');
            output.textContent = 'Running tests...';
            
            try {
                const success = await markdownParserTests.run();
                if (success) {
                    output.innerHTML = '<span class="success">‚úÖ All tests passed!</span>';
                } else {
                    output.innerHTML = '<span class="error">‚ùå Some tests failed. Check console for details.</span>';
                }
            } catch (error) {
                output.innerHTML = `<span class="error">‚ùå Test error: ${error.message}</span>`;
                console.error('Test error:', error);
            }
        };

        // Load Test.md file function
        window.loadTestMdFile = async function() {
            const input = document.getElementById('markdownInput');
            const output = document.getElementById('testOutput');
            
            try {
                // Try to fetch Test.md from the same directory
                const response = await fetch('./Test.md');
                if (response.ok) {
                    const testMdContent = await response.text();
                    input.value = testMdContent;
                    updatePreview();
                    output.innerHTML = '<span class="success">‚úÖ Test.md loaded successfully!</span>';
                } else {
                    // Fallback to the content we have embedded
                    output.innerHTML = '<span style="color: orange;">‚ÑπÔ∏è Test.md file not found, using embedded demo content</span>';
                }
            } catch (error) {
                output.innerHTML = '<span style="color: orange;">‚ÑπÔ∏è Could not load Test.md file, using embedded demo content</span>';
                console.log('Test.md load info:', error.message);
            }
        };
        
        // Interactive demo
        const input = document.getElementById('markdownInput');
        const htmlOutput = document.getElementById('htmlOutput');
        const htmlPreview = document.getElementById('htmlPreview');
        const parseStats = document.getElementById('parseStats');
        
        function updatePreview() {
            const markdown = input.value;
            const startTime = performance.now();
            const html = parser.parse(markdown);
            const parseTime = performance.now() - startTime;
            const stats = parser.getStats();
            
            htmlOutput.textContent = html;
            htmlPreview.innerHTML = html;
            parseStats.innerHTML = `
                <strong>Parse Stats:</strong>
                Parse time: ${parseTime.toFixed(2)}ms |
                Lines: ${stats.totalLines} |
                HTML lines: ${stats.htmlLines} |
                Link refs: ${stats.linkReferences}
            `;
        }
        
        // Update preview on input
        input.addEventListener('input', updatePreview);
        
        // Initial preview
        updatePreview();
        
        console.log('Markdown Parser loaded successfully!');
        console.log('Run runTests() to execute all tests');
        console.log('Parser instance available as window.parser');
    </script>
</body>
</html>